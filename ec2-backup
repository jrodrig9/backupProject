#!/usr/bin/env python

import boto
import sys
import getopt
import os

def errorMsg(msg):
    sys.stderr.write("ERROR - " + str(msg) + "\n")
    sys.exit(1)

def existsDir(directory):
    return os.path.exists(directory) and os.path.isdir(directory)

def main(argv):
     method = ''
     volumeId = ''
     try:
          opts, args = getopt.getopt(argv, "-hm:v:")
     except getopt.GetoptError:
         errorMsg("Usage: ec2-backup [-h] [-m method] [-v volume-id] dir")
     if len(args) < 1:
         errorMsg("Usage: ec2-backup [-h] [-m method] [-v volume-id] dir")
     for opt, arg in opts:
          if opt == "-h":
               print "Usage: ec2-backup [-h] [-m method] [-v volume-id] dir"
               sys.exit(0)
          elif opt in ("-m"):
               method = arg
          elif opt in ("-v"):
               volumeId = arg
     #print "Method is: ", method
     #print "Volume is: ", volume
     #print args
     if not(existsDir(args[0])):
         errorMsg("The given directory does not exist: "+args[0]);
main(sys.argv[1:])
